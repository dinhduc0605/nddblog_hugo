[{"categories":null,"content":"Ká»ƒ tá»« bÃ i viáº¿t trÆ°á»›c cÅ©ng Ä‘Ã£ pháº£i hÆ¡n 2 thÃ¡ng rá»“i nhá»‰, cá»© má»—i láº§n Ä‘á»™ng vÃ o Ä‘á»‹nh viáº¿t gÃ¬ Ä‘Ã³ mÃ  khÃ´ng nghÄ© ra gÃ¬ lÃ  mÃ¬nh láº¡i thÃ´i ğŸ˜‚. HÃ´m nay pháº£i cá»‘ gáº¯ng láº¯m má»›i ngá»“i Ä‘Æ°á»£c vÃ o mÃ¡y tÃ­nh gÃµ ra vÃ i dÃ²ng. Sau 1 há»“i Ä‘áº¯n Ä‘o suy nghÄ© thÃ¬ mÃ¬nh quyáº¿t Ä‘á»‹nh viáº¿t vá» nhá»¯ng kiáº¿n thá»©c cÅ©ng nhÆ° kinh nghiá»‡m Ä‘Ã£ há»c Ä‘Æ°á»£c tá»« khi Ä‘i lÃ m Ä‘áº¿n giá» ğŸ˜. TrÆ°á»›c Ä‘Ã¢y má»—i láº§n cáº§n tÃ¬m kiáº¿m hay sáº¯p xáº¿p dá»¯ liá»‡u mÃ¬nh Ä‘á»u tá»± viáº¿t cÃ¡c cÃ¢u query, tuy ráº±ng rails cÅ©ng cÃ³ sáºµn nhá»¯ng method nhÆ° where, find, order â€¦ nhÆ°ng nhiá»u lÃºc váº«n khÃ¡ lÃ  váº¥t váº£, nháº¥t lÃ  khi pháº£i query qua nhiá»u thuá»™c tÃ­nh. Gáº§n Ä‘Ã¢y má»›i biáº¿t thÃªm 1 gem ráº¥t thÃº vá»‹ lÃ  Ransack - giÃºp giáº£i quyáº¿t váº¥n Ä‘á» tÃ¬m kiáº¿m vÃ  sáº¯p xáº¿p 1 cÃ¡ch nhanh chÃ³ng vÃ  hiá»‡u quáº£ ğŸ˜. Trong bÃ i nÃ y mÃ¬nh sáº½ giá»›i thiá»‡u sÆ¡ qua cÃ¡ch cÃ i Ä‘áº·t cÅ©ng nhÆ° cÃ¡ch sá»­ dá»¥ng gem nÃ y. CÃ i Ä‘áº·t Ransack tÆ°Æ¡ng thÃ­ch vá»›i Rails 5.0, 5.1 vÃ  5.2 vÃ  phiÃªn báº£n Ruby tá»« sau 2.2. Náº¿u báº¡n sá»­ dá»¥ng Rails \u003c 5.0 thÃ¬ hÃ£y dÃ¹ng ruby 1.8. Náº¿u nhÆ° vá»›i ruby 1.8 hay JRuby mÃ  gáº·p pháº£i váº¥n Ä‘á», hÃ£y sá»­ dá»¥ng cÃ¡c phiÃªn báº£n trÆ°á»›c cá»§a Ransack (tá»« 1.3.0 trá»Ÿ xuá»‘ng). Äá»ƒ cÃ i Ä‘áº·t báº¡n thÃªm dÃ²ng sau vÃ o Gemfile gem 'ransack' Náº¿u cÃ¡c báº¡n muá»‘n sá»­ dá»¥ng phiÃªn báº£n má»›i nháº¥t thÃ¬ hÃ£y sá»­ dá»¥ng nhÃ¡nh master gem 'ransack', github: 'activerecord-hackery/ransack' CÃ¡ch sá»­ dá»¥ng Trong controller Method ransack dÃ¹ng Ä‘á»ƒ tÃ¬m kiáº¿m dá»¯ trong database dá»±a vÃ o cÃ¡c Ä‘iá»u kiá»‡n Ä‘Æ°á»£c truyá»n tá»« params[:q], sau Ä‘Ã³ káº¿t quáº£ Ä‘Æ°á»£c láº¥y ra thÃ´ng qua method result. def index @q = Person.ransack(params[:q]) @people = @q.result(distinct: true) end Khi dÃ¹ng vá»›i pagination nhÆ° kaminari thÃ¬ khÃ´ng thá»ƒ dÃ¹ng distinct: true, nÃªn hÃ£y sá»­ dá»¥ng .to_a.uniq: @people = @q.result.includes(:articles).page(params[:page]).to_a.uniq Trong view 2 helper method chÃ­nh lÃ  search_form_for vÃ  sort_link, Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong Ransack::Helpers::FormHelper. search_form_for thay tháº¿ cho form_for Ä‘á»ƒ táº¡o search form trong view vá»›i tham sá»‘ Ä‘áº§u máº·c Ä‘á»‹nh lÃ  q ( params[:q] ) \u003c%= search_form_for @q do |f| %\u003e # TÃ¬m cÃ¡c pháº§n tá»­ cÃ³ thuá»™c tÃ­nh name chá»©a... \u003c%= f.label :name_cont %\u003e \u003c%= f.search_field :name_cont %\u003e # TÃ¬m cÃ¡c pháº§n tá»­ náº¿u trong cÃ¡c articles liÃªn káº¿t tá»“n táº¡i article cÃ³ title chá»©a... \u003c%= f.label :articles_title_start %\u003e \u003c%= f.search_field :articles_title_start %\u003e # CÃ¡c thuá»™c tÃ­nh cÃ³ thá»ƒ Ä‘Æ°á»£c ná»‘i liá»n vÃ  Ä‘Æ°á»£c tÃ¬m kiáº¿m vá»›i 1 giÃ¡ trá»‹ duy nháº¥t. \u003c%= f.label :name_or_description_or_email_or_articles_title_cont %\u003e \u003c%= f.search_field :name_or_description_or_email_or_articles_title_cont %\u003e \u003c%= f.submit %\u003e \u003c% end %\u003e Tham sá»‘ cá»§a f.search_field pháº£i Ä‘Æ°á»£c viáº¿t dÆ°á»›i dáº¡ng nhÆ° sau: attribute_name[_or_attribute_name]..._predicate. Trong Ä‘Ã³ attribute_name lÃ  tÃªn trÆ°á»ng ( thuá»™c tÃ­nh ) cá»§a model, _or_ lÃ  káº¿t há»£p thÃªm dá»¯ liá»‡u cá»§a trÆ°á»ng ( thuá»™c tÃ­nh ) khÃ¡c, cÃ²n _predicate lÃ  cont ( chá»©a ), start ( báº¯t Ä‘áº§u vá»›i )â€¦ NhÆ° vÃ­ dá»¥ á»Ÿ trÃªn name_or_description_or_email_or_articles_title_cont tá»©c lÃ  tÃ¬m cÃ¡c Person cÃ³ name hoáº·c description hoáº·c email hoáº·c ( tá»“n táº¡i article trong cÃ¡c articles liÃªn káº¿t cÃ³ title ) chá»©a chuá»—i Ä‘Æ°á»£c nháº­p vÃ o form. Äá»ƒ truyá»n format ta lÃ m nhÆ° sau: \u003c%= search_form_for(@q, format: :pdf) do |f| %\u003e \u003c%= search_form_for(@q, format: :json) do |f| %\u003e sort_link giÃºp header cá»§a cÃ¡c table cÃ³ tháº¿ sáº¯p xáº¿p theo thá»© tá»± tÃ¹y theo tá»«ng loáº¡i dá»¯ liá»‡u ( text, date,â€¦ ) \u003c%= sort_link(@q, :name) %\u003e CÃ³ thá»ƒ truyá»n thÃªm cÃ¡c tham sá»‘ khÃ¡c nhÆ° tÃªn header, kiá»ƒu sáº¯p xáº¿p máº·c Ä‘á»‹nh: \u003c%= sort_link(@q, :name, 'Last Name', default_order: :desc) %\u003e Sáº¯p xáº¿p vá»›i nhiá»u trÆ°á»ng khÃ¡c nhau: \u003c%= sort_link(@q, :last_name, [:last_name, 'first_name asc'], 'Last Name') %\u003e NhÆ° vÃ­ dá»¥ trÃªn, Ä‘áº§u tiÃªn sáº½ xáº¿p theo last_name rá»“i Ä‘áº¿n first_name. Trong trÆ°á»ng há»£p báº¡n muá»‘n sáº¯p xáº¿p theo cÃ¡c giÃ¡ trá»‹ phá»©c táº¡p, nhÆ° káº¿t quáº£ cá»§a 1 lá»‡nh SQL báº¡n cÃ³ thá»ƒ dÃ¹ng scope. Trong model báº¡n Ä‘á»‹nh nghÄ©a scope vá»›i cÃ¡c thuá»™c tÃ­nh áº£o mÃ  báº¡n muá»‘n dÃ¹ng Ä‘á»ƒ sáº¯p xáº¿p: class Person \u003c ActiveRecord::Base scope :sort_by_reverse_name_asc, lambda { order(\"REVERSE(name) ASC\") } scope :sort_by_reverse_name_desc, lambda { order(\"REVERSE(name) DESC\") } ... sau Ä‘Ã³ sá»­ dá»¥ng trong view nhÆ° sau: \u003c%= sort_link(@q, :reverse_name) %\u003e sort_link khi render trÃªn view sáº½ Ä‘Æ°á»£c hiá»ƒ","date":"2024-02-23","objectID":"/ransack_cong_cu_tim_kiem_hieu_qua/:0:0","tags":null,"title":"Ransack - cÃ´ng cá»¥ tuyá»‡t vá»i giÃºp tÃ¬m kiáº¿m vÃ  sáº¯p xáº¿p dá»¯ liá»‡u Ä‘Æ¡n giáº£n hÆ¡n","uri":"/ransack_cong_cu_tim_kiem_hieu_qua/"},{"categories":null,"content":"Xin chÃ o cÃ¡c báº¡n, mÃ¬nh lÃ  Äá»©c, ngÆ°á»i táº¡o ra NDDBlog nÃ y. Cháº¯c háº³n nhÃ¬n tÃªn lÃ  cÃ¡c báº¡n Ä‘Ã£ hiá»ƒu vÃ¬ sao blog nÃ y láº¡i cÃ³ tÃªn nhÆ° váº­y rá»“i nhá»‰ ğŸ˜„. ÄÃ¢y lÃ  bÃ i viáº¿t Ä‘áº§u tiÃªn, vÃ¬ váº­y mÃ¬nh muá»‘n giá»›i thiá»‡u báº£n thÃ¢n 1 chÃºt vÃ  lÃ½ do vÃ¬ sao blog nÃ y ra Ä‘á»i. MÃ¬nh tá»‘t nghiá»‡p Ä‘áº¡i há»c BÃ¡ch Khoa HÃ  Ná»™i thÃ¡ng 7/2017. Sau Ä‘Ã³ thÃ¬ mÃ¬nh á»Ÿ nhÃ  há»c tiáº¿ng Nháº­t vÃ  tÃ¬m kiáº¿m cÃ´ng viá»‡c bÃªn Nháº­t. Äáº¿n thÃ¡ng 3 nÄƒm nay (2018) mÃ¬nh Ä‘Æ°á»£c nháº­n vÃ o GA technologies vÃ  báº¯t Ä‘áº§u lÃ m viá»‡c bÃªn Nháº­t tá»« Ä‘Ã³. Vá» lÃ½ do vÃ  quÃ¡ trÃ¬nh mÃ¬nh tÃ¬m kiáº¿m cÃ´ng viá»‡c táº¡i cÃ´ng ty Nháº­t thÃ¬ khi nÃ o cÃ³ thá»i gian ráº£nh mÃ¬nh sáº½ viáº¿t 1 bÃ i riÃªng. CÃ´ng viá»‡c thÃ¬ khi cÃ²n há»c Ä‘áº¡i há»c mÃ¬nh hay lÃ m á»©ng dá»¥ng Android, nhÆ°ng khi Ä‘Æ°á»£c tuyá»ƒn vÃ o cÃ´ng ty mÃ¬nh Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh lÃ m vá» Rails, phÃ¡t triá»ƒn há»‡ thá»‘ng ná»™i bá»™ cá»§a cÃ´ng ty. CÅ©ng may trÆ°á»›c mÃ¬nh Ä‘Ã£ tá»«ng há»c qua vá» Rails nÃªn cÅ©ng khÃ´ng Ä‘áº¿n má»©c khÃ³ khÄƒn láº¯m. CÃ³ láº½ giá»›i thiá»‡u vá» báº£n thÃ¢n nhÆ° váº­y lÃ  Ä‘á»§ rá»“i, náº¿u cÃ¡c báº¡n cÃ³ há»©ng thÃº cÃ³ thá»ƒ xem chá»‰ tiáº¿t hÆ¡n á»Ÿ má»¥c about. Vá» pháº§n táº¡i sao blog nÃ y láº¡i ra Ä‘á»i thÃ¬ chá»§ yáº¿u mÃ¬nh muá»‘n cÃ³ 1 nÆ¡i Ä‘á»ƒ viáº¿t láº¡i nhá»¯ng kinh nghiá»‡m cá»§a báº£n thÃ¢n, khÃ´ng chá»‰ trong cÃ´ng viá»‡c mÃ  trong cáº£ Ä‘á»i sá»‘ng, Ä‘áº·c biá»‡t lÃ  cuá»™c sá»‘ng bÃªn Nháº­t. NhÆ° váº­y sau nÃ y mÃ¬nh Ä‘á»c láº¡i cÅ©ng dá»… dÃ ng hÆ¡n. Äá»“ng thá»i náº¿u nhÆ° cÃ³ ngÆ°á»i Ä‘á»c vÃ  bÃ i viáº¿t cá»§a mÃ¬nh cÃ³ thá»ƒ giÃºp Ã­ch Ä‘Æ°á»£c cho há» thÃ¬ khÃ´ng cÃ²n gÃ¬ tá»‘t hÆ¡n ğŸ˜‡. Tá»« trÆ°á»›c Ä‘áº¿n giá» kháº£ nÄƒng viáº¿t lÃ¡ch cá»§a mÃ¬nh Ä‘á»u ráº¥t kÃ©m, nÃªn mong ráº±ng thÃ´ng qua viá»‡c viáº¿t blog thÆ°á»ng xuyÃªn cÃ³ thá»ƒ cáº£i thiá»‡n ká»¹ nÄƒng nÃ y. Náº¿u mÃ¬nh viáº¿t cÃ³ gÃ¬ khÃ´ng Ä‘Ãºng, mong cÃ¡c ae nÃ©m Ä‘Ã¡ nhiá»‡t tÃ¬nh Ä‘á»ƒ mÃ¬nh sá»­a nhÃ©. Háº¹n gáº·p láº¡i!!! ğŸ‘‹ ","date":"2024-02-23","objectID":"/loi_noi_dau/:0:0","tags":null,"title":"Lá»i nÃ³i Ä‘áº§u","uri":"/loi_noi_dau/"}]